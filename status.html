<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="manifest" href="../manifest.json">
    <meta name="theme-color" content="#4F46E5">
    <link rel="icon" href="../icons/moodchat-192.png">
    <link rel="icon" href="../icons/moodchat-512.png">
    <meta name="theme-color" content="#000000">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Status | Knecta Chat</title>
    
    <!-- jQuery MUST be loaded before any dependent scripts -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <link rel="stylesheet" href="status.css">
    
    <!-- API.js must load BEFORE status.js -->
    <script src="../api.js"></script>
    
    <style>
        /* ============================================= */
        /* MISSING CSS THAT WASN'T IN STATUS.CSS */
        /* ============================================= */
        
        /* Action Buttons */
        .action-btn {
            padding: 10px 20px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            font-weight: 500;
            font-size: 14px;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .action-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .action-btn.primary {
            background-color: var(--primary-color);
            color: white;
        }

        .action-btn.primary:hover:not(:disabled) {
            background-color: #0073e6;
            transform: translateY(-1px);
        }

        .action-btn.secondary {
            background-color: var(--secondary-color);
            color: var(--text-primary);
        }

        .action-btn.secondary:hover:not(:disabled) {
            background-color: #e4e6e9;
            transform: translateY(-1px);
        }

        .action-btn.success {
            background-color: var(--success-color);
            color: white;
        }

        .action-btn.success:hover:not(:disabled) {
            background-color: #2da64a;
            transform: translateY(-1px);
        }

        .action-btn.danger {
            background-color: var(--danger-color);
            color: white;
        }

        .action-btn.danger:hover:not(:disabled) {
            background-color: #e5392e;
            transform: translateY(-1px);
        }

        .action-btn.warning {
            background-color: var(--warning-color);
            color: white;
        }

        .action-btn.warning:hover:not(:disabled) {
            background-color: #e68a00;
            transform: translateY(-1px);
        }

        .action-btn.info {
            background-color: var(--info-color);
            color: white;
        }

        .action-btn.info:hover:not(:disabled) {
            background-color: #1ab4f5;
            transform: translateY(-1px);
        }

        /* Text Input */
        .text-input {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-size: 14px;
            background-color: var(--bg-color);
            color: var(--text-primary);
            transition: all 0.2s;
        }

        .text-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(0, 132, 255, 0.1);
        }

        .text-input::placeholder {
            color: var(--text-secondary);
        }

        .text-input:disabled {
            background-color: var(--secondary-color);
            cursor: not-allowed;
        }

        /* Drafts Section */
        .drafts-section {
            display: none;
        }

        .drafts-section.active {
            display: block;
        }

        .draft-item {
            background-color: var(--secondary-color);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.2s;
            border: 2px solid transparent;
        }

        .draft-item:hover {
            background-color: #e4e6e9;
            border-color: var(--primary-color);
        }

        .draft-item.selected {
            background-color: rgba(0, 132, 255, 0.1);
            border-color: var(--primary-color);
        }

        .draft-preview {
            font-size: 14px;
            color: var(--text-primary);
            margin-bottom: 5px;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .draft-meta {
            font-size: 12px;
            color: var(--text-secondary);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .draft-actions {
            display: flex;
            gap: 8px;
        }

        .draft-action-btn {
            background: none;
            border: none;
            color: var(--primary-color);
            cursor: pointer;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
        }

        .draft-action-btn:hover {
            background-color: rgba(0, 132, 255, 0.1);
        }

        .draft-action-btn.danger {
            color: var(--danger-color);
        }

        .draft-action-btn.danger:hover {
            background-color: rgba(255, 59, 48, 0.1);
        }

        /* Schedule List */
        .schedule-list {
            display: none;
        }

        .schedule-list.active {
            display: block;
        }

        .schedule-item {
            background-color: var(--secondary-color);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .schedule-info h4 {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .schedule-time {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .schedule-actions {
            display: flex;
            gap: 8px;
        }

        /* Cancel Button */
        .cancel-btn {
            background-color: var(--danger-color);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.2s;
        }

        .cancel-btn:hover {
            background-color: #e5392e;
        }

        .cancel-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Save Button */
        .save-btn {
            background-color: var(--success-color);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.2s;
        }

        .save-btn:hover {
            background-color: #2da64a;
        }

        .save-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Edit Button */
        .edit-btn {
            background-color: var(--info-color);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.2s;
        }

        .edit-btn:hover {
            background-color: #1ab4f5;
        }

        /* Close Button */
        .close-btn {
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 18px;
            padding: 8px;
            border-radius: 50%;
            transition: all 0.2s;
        }

        .close-btn:hover {
            background-color: var(--secondary-color);
            color: var(--text-primary);
        }

        /* Filter Tags */
        .filter-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 15px;
        }

        .filter-tag {
            background-color: var(--secondary-color);
            padding: 6px 12px;
            border-radius: 16px;
            font-size: 12px;
            display: inline-flex;
            align-items: center;
            gap: 5px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .filter-tag.active {
            background-color: var(--primary-color);
            color: white;
        }

        .filter-tag:hover {
            background-color: #e4e6e9;
        }

        .filter-tag.active:hover {
            background-color: #0073e6;
        }

        /* Clear Filters Button */
        .clear-filters-btn {
            background: none;
            border: 1px solid var(--border-color);
            color: var(--text-secondary);
            padding: 6px 12px;
            border-radius: 16px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .clear-filters-btn:hover {
            background-color: var(--secondary-color);
            border-color: var(--primary-color);
            color: var(--primary-color);
        }

        /* Media Preview Improvements */
        .media-preview-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 10px;
            margin-bottom: 15px;
        }

        .media-preview-item {
            position: relative;
            border-radius: 8px;
            overflow: hidden;
        }

        .media-preview-item img,
        .media-preview-item video {
            width: 100%;
            height: 100px;
            object-fit: cover;
        }

        .media-preview-count {
            position: absolute;
            top: 5px;
            right: 5px;
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 2px 6px;
            border-radius: 10px;
            font-size: 11px;
        }

        /* Poll Creation Enhancements */
        .poll-option-item {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .poll-option-number {
            width: 24px;
            height: 24px;
            background-color: var(--secondary-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 600;
            flex-shrink: 0;
        }

        .poll-option-input-wrapper {
            flex: 1;
            position: relative;
        }

        .poll-option-input-wrapper input {
            width: 100%;
            padding-right: 40px;
        }

        .remove-poll-option {
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: var(--danger-color);
            cursor: pointer;
            font-size: 16px;
            padding: 4px;
        }

        /* Schedule DateTime Picker */
        .schedule-datetime-picker {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .schedule-date,
        .schedule-time {
            flex: 1;
        }

        .schedule-date input,
        .schedule-time input {
            width: 100%;
        }

        /* Repeat Options */
        .repeat-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 15px;
        }

        .repeat-option {
            padding: 12px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            cursor: pointer;
            text-align: center;
            transition: all 0.2s;
        }

        .repeat-option:hover {
            border-color: var(--primary-color);
            background-color: rgba(0, 132, 255, 0.05);
        }

        .repeat-option.selected {
            border-color: var(--primary-color);
            background-color: rgba(0, 132, 255, 0.1);
        }

        /* Notification Settings */
        .notification-settings {
            background-color: var(--secondary-color);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .notification-option {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid var(--border-color);
        }

        .notification-option:last-child {
            border-bottom: none;
        }

        .notification-label {
            flex: 1;
        }

        .notification-label h4 {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 3px;
        }

        .notification-label p {
            font-size: 12px;
            color: var(--text-secondary);
        }

        /* Report Details */
        .report-details {
            margin-top: 15px;
        }

        .report-details textarea {
            width: 100%;
            min-height: 100px;
            margin-top: 8px;
        }

        /* Highlights Editor */
        .highlights-editor {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1001;
            align-items: center;
            justify-content: center;
        }

        .highlights-editor.active {
            display: flex;
        }

        .editor-container {
            width: 90%;
            max-width: 500px;
            background-color: var(--bg-color);
            border-radius: 20px;
            padding: 25px;
            box-shadow: var(--shadow-lg);
        }

        .editor-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .editor-header h3 {
            font-size: 20px;
            font-weight: 600;
        }

        .editor-content {
            margin-bottom: 20px;
        }

        .editor-actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }

        /* Memory Timeline Filters */
        .timeline-filters-container {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border-color);
        }

        /* Stats Chart */
        .stats-chart-container {
            background-color: var(--secondary-color);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .stats-chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .stats-chart-title {
            font-weight: 600;
        }

        .stats-chart-period {
            font-size: 14px;
            color: var(--text-secondary);
        }

        .stats-chart-canvas {
            width: 100%;
            height: 200px;
        }

        /* Quick Stats */
        .quick-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .quick-stat {
            background-color: var(--secondary-color);
            border-radius: 12px;
            padding: 15px;
            text-align: center;
        }

        .quick-stat-value {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 5px;
        }

        .quick-stat-label {
            font-size: 12px;
            color: var(--text-secondary);
        }

        /* Drafts Empty State */
        .drafts-empty {
            text-align: center;
            padding: 40px 20px;
            color: var(--text-secondary);
        }

        .drafts-empty i {
            font-size: 48px;
            margin-bottom: 15px;
            opacity: 0.5;
        }

        /* Schedule Empty State */
        .schedule-empty {
            text-align: center;
            padding: 40px 20px;
            color: var(--text-secondary);
        }

        .schedule-empty i {
            font-size: 48px;
            margin-bottom: 15px;
            opacity: 0.5;
        }

        /* Enhanced Loading */
        .enhanced-loading {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 40px 20px;
            color: var(--text-secondary);
        }

        .enhanced-loading i {
            font-size: 32px;
            margin-bottom: 15px;
            animation: enhanced-spin 1.5s linear infinite;
        }

        .enhanced-loading p {
            margin-bottom: 10px;
        }

        .loading-progress {
            width: 100%;
            max-width: 200px;
            height: 4px;
            background-color: var(--secondary-color);
            border-radius: 2px;
            overflow: hidden;
            margin-top: 10px;
        }

        .loading-progress-bar {
            height: 100%;
            background-color: var(--primary-color);
            width: 0%;
            animation: loading-progress 2s ease-in-out infinite;
        }

        @keyframes enhanced-spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes loading-progress {
            0% { width: 0%; transform: translateX(0); }
            50% { width: 100%; transform: translateX(0); }
            100% { width: 100%; transform: translateX(200px); }
        }

        /* Responsive Enhancements */
        @media (max-width: 768px) {
            .action-btn {
                padding: 8px 16px;
                font-size: 13px;
            }

            .quick-stats {
                grid-template-columns: repeat(2, 1fr);
            }

            .schedule-datetime-picker {
                flex-direction: column;
            }

            .repeat-options {
                grid-template-columns: 1fr;
            }

            .editor-container {
                padding: 20px;
            }

            .stats-chart-container {
                padding: 15px;
            }
        }

        @media (max-width: 480px) {
            .quick-stats {
                grid-template-columns: 1fr;
            }

            .draft-actions {
                flex-direction: column;
            }

            .schedule-actions {
                flex-direction: column;
            }
        }

        /* Utility Classes */
        .hidden {
            display: none !important;
        }

        .visible {
            display: block !important;
        }

        .text-center {
            text-align: center;
        }

        .text-right {
            text-align: right;
        }

        .text-left {
            text-align: left;
        }

        .mt-10 {
            margin-top: 10px;
        }

        .mt-20 {
            margin-top: 20px;
        }

        .mb-10 {
            margin-bottom: 10px;
        }

        .mb-20 {
            margin-bottom: 20px;
        }

        .ml-auto {
            margin-left: auto;
        }

        .mr-auto {
            margin-right: auto;
        }

        .flex {
            display: flex;
        }

        .flex-col {
            flex-direction: column;
        }

        .items-center {
            align-items: center;
        }

        .justify-between {
            justify-content: space-between;
        }

        .justify-center {
            justify-content: center;
        }

        .gap-5 {
            gap: 5px;
        }

        .gap-10 {
            gap: 10px;
        }

        .gap-15 {
            gap: 15px;
        }

        .w-full {
            width: 100%;
        }

        .w-half {
            width: 50%;
        }

        .w-auto {
            width: auto;
        }

        /* Color Utilities */
        .bg-primary {
            background-color: var(--primary-color);
        }

        .bg-secondary {
            background-color: var(--secondary-color);
        }

        .bg-success {
            background-color: var(--success-color);
        }

        .bg-danger {
            background-color: var(--danger-color);
        }

        .bg-warning {
            background-color: var(--warning-color);
        }

        .bg-info {
            background-color: var(--info-color);
        }

        .text-primary {
            color: var(--primary-color);
        }

        .text-secondary {
            color: var(--text-secondary);
        }

        .text-success {
            color: var(--success-color);
        }

        .text-danger {
            color: var(--danger-color);
        }

        .text-warning {
            color: var(--warning-color);
        }

        .text-info {
            color: var(--info-color);
        }

        /* Scrollbar Styling */
        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }

        ::-webkit-scrollbar-track {
            background: var(--secondary-color);
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--border-color);
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--text-secondary);
        }

        /* Focus States */
        *:focus {
            outline: 2px solid var(--primary-color);
            outline-offset: 2px;
        }

        *:focus:not(.focus-visible) {
            outline: none;
        }

        /* Print Styles */
        @media print {
            .no-print {
                display: none !important;
            }
            
            .print-only {
                display: block !important;
            }
        }

        /* Accessibility */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        /* High Contrast Mode */
        @media (prefers-contrast: high) {
            :root {
                --primary-color: #0056b3;
                --danger-color: #c00;
                --success-color: #007a00;
                --warning-color: #9d5c00;
            }
        }

        /* Reduced Motion */
        @media (prefers-reduced-motion: reduce) {
            *,
            *::before,
            *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
                scroll-behavior: auto !important;
            }
        }
    </style>
</head>
<body>
    <!-- Create Status Modal -->
    <div class="create-status-modal" id="createStatusModal">
        <div class="create-status-container">
            <div class="create-status-header">
                <h3>Create Status</h3>
                <button class="create-status-btn" id="closeCreateStatusModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="create-status-tabs">
                <button class="create-status-tab active" data-tab="text">Text</button>
                <button class="create-status-tab" data-tab="media">Media</button>
                <button class="create-status-tab" data-tab="poll">Poll</button>
                <button class="create-status-tab" data-tab="settings">Settings</button>
            </div>
            
            <div class="create-status-content">
                <!-- Text Status Tab -->
                <div class="create-status-tab-content active" id="textTab">
                    <div class="text-status-input-container">
                        <textarea class="text-status-input" id="textStatusInput" placeholder="What's on your mind?"></textarea>
                        <div style="display: flex; justify-content: space-between; margin-top: 10px;">
                            <span id="textStatusCounter">0/500</span>
                            <button class="action-btn secondary" id="clearTextBtn">
                                <i class="fas fa-trash"></i> Clear
                            </button>
                        </div>
                    </div>
                    
                    <div class="emoji-picker-container">
                        <div class="metadata-title">
                            <i class="fas fa-smile"></i>
                            <span>Add Emojis</span>
                        </div>
                        <div class="emoji-grid" id="emojiGrid">
                            <!-- Emojis will be loaded here -->
                        </div>
                    </div>
                    
                    <div class="background-options">
                        <div class="metadata-title">
                            <i class="fas fa-palette"></i>
                            <span>Background</span>
                        </div>
                        <div class="background-grid" id="backgroundGrid">
                            <!-- Background options will be loaded here -->
                        </div>
                    </div>
                </div>
                
                <!-- Media Status Tab -->
                <div class="create-status-tab-content" id="mediaTab">
                    <div class="media-upload-container" id="mediaUploadArea">
                        <div class="media-upload-icon">
                            <i class="fas fa-cloud-upload-alt"></i>
                        </div>
                        <div class="media-upload-text">
                            Upload Photo or Video
                        </div>
                        <div class="media-upload-subtext">
                            Click to browse or drag and drop
                        </div>
                        <input type="file" id="mediaFileInput" accept="image/*,video/*" multiple style="display: none;">
                    </div>
                    
                    <div class="media-preview-grid" id="mediaPreview">
                        <!-- Media preview will be shown here -->
                    </div>
                    
                    <div class="text-status-input-container">
                        <textarea class="text-status-input" id="mediaCaptionInput" placeholder="Add a caption..." rows="3"></textarea>
                    </div>
                </div>
                
                <!-- Poll Status Tab -->
                <div class="create-status-tab-content" id="pollTab">
                    <div class="text-status-input-container">
                        <textarea class="text-status-input" id="pollQuestionInput" placeholder="Ask a question..." rows="2"></textarea>
                    </div>
                    
                    <div id="pollOptionsContainer">
                        <!-- Poll options will be loaded here -->
                    </div>
                    
                    <button class="add-option-btn" id="addPollOptionBtn">
                        <i class="fas fa-plus"></i> Add Option
                    </button>
                    
                    <div class="metadata-section" style="margin-top: 20px;">
                        <div class="metadata-title">
                            <i class="fas fa-clock"></i>
                            <span>Poll Duration</span>
                        </div>
                        <select class="text-input" id="pollDurationSelect">
                            <option value="3600">1 hour</option>
                            <option value="21600">6 hours</option>
                            <option value="43200">12 hours</option>
                            <option value="86400">24 hours</option>
                            <option value="604800">7 days</option>
                        </select>
                    </div>
                </div>
                
                <!-- Settings Tab -->
                <div class="create-status-tab-content" id="settingsTab">
                    <div class="status-metadata">
                        <!-- Intent -->
                        <div class="metadata-section">
                            <div class="metadata-title">
                                <i class="fas fa-bullseye"></i>
                                <span>Status Intent</span>
                            </div>
                            <div class="intent-options" id="intentOptions">
                                <!-- Intent options will be loaded here -->
                            </div>
                        </div>
                        
                        <!-- Mood -->
                        <div class="metadata-section">
                            <div class="metadata-title">
                                <i class="fas fa-brain"></i>
                                <span>Current Mood</span>
                            </div>
                            <div class="mood-options" id="moodOptions">
                                <!-- Mood options will be loaded here -->
                            </div>
                        </div>
                        
                        <!-- Category -->
                        <div class="metadata-section">
                            <div class="metadata-title">
                                <i class="fas fa-tag"></i>
                                <span>Category</span>
                            </div>
                            <div class="category-options" id="categoryOptions">
                                <!-- Category options will be loaded here -->
                            </div>
                        </div>
                        
                        <!-- Action Buttons -->
                        <div class="metadata-section">
                            <div class="metadata-title">
                                <i class="fas fa-hand-pointer"></i>
                                <span>Action Buttons</span>
                            </div>
                            <div class="action-buttons-selector" id="actionButtonsSelector">
                                <!-- Action button options will be loaded here -->
                            </div>
                        </div>
                        
                        <!-- Privacy -->
                        <div class="metadata-section">
                            <div class="metadata-title">
                                <i class="fas fa-lock"></i>
                                <span>Privacy</span>
                            </div>
                            <div class="privacy-options" id="privacyOptions">
                                <!-- Privacy options will be loaded here -->
                            </div>
                        </div>
                        
                        <!-- Duration -->
                        <div class="metadata-section">
                            <div class="metadata-title">
                                <i class="fas fa-hourglass-half"></i>
                                <span>Status Duration</span>
                            </div>
                            <div class="duration-options" id="durationOptions">
                                <!-- Duration options will be loaded here -->
                            </div>
                        </div>
                        
                        <!-- Advanced Options -->
                        <div class="advanced-options">
                            <div class="advanced-option">
                                <div class="advanced-option-label">
                                    <div>
                                        <div class="advanced-option-name">Sensitive Content</div>
                                        <div class="advanced-option-description">Blur media for sensitive content</div>
                                    </div>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="sensitiveContentToggle">
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            
                            <div class="advanced-option">
                                <div class="advanced-option-label">
                                    <div>
                                        <div class="advanced-option-name">Silent Mode</div>
                                        <div class="advanced-option-description">Post without notifications</div>
                                    </div>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="silentModeToggle">
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            
                            <div class="advanced-option">
                                <div class="advanced-option-label">
                                    <div>
                                        <div class="advanced-option-name">Auto-Translate</div>
                                        <div class="advanced-option-description">Automatically translate text</div>
                                    </div>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="autoTranslateToggle">
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            
                            <div class="advanced-option">
                                <div class="advanced-option-label">
                                    <div>
                                        <div class="advanced-option-name">Offline Queue</div>
                                        <div class="advanced-option-description">Save for posting when online</div>
                                    </div>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="offlineQueueToggle">
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Template Section -->
                    <div class="metadata-section" style="margin-top: 20px;">
                        <div class="metadata-title">
                            <i class="fas fa-layer-group"></i>
                            <span>Templates</span>
                        </div>
                        <div class="category-options" id="templateOptions">
                            <!-- Template options will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>
            
            <div style="padding: 20px; border-top: 1px solid var(--border-color); display: flex; justify-content: space-between;">
                <button class="action-btn secondary" id="saveDraftBtn">
                    <i class="fas fa-save"></i> Save Draft
                </button>
                <button class="action-btn primary" id="postStatusBtn">
                    <i class="fas fa-paper-plane"></i> Post Status
                </button>
                <button class="action-btn success" id="scheduleStatusBtn">
                    <i class="fas fa-clock"></i> Schedule
                </button>
            </div>
        </div>
    </div>
    
    <!-- Drafts Modal -->
    <div class="create-status-modal" id="draftsModal">
        <div class="create-status-container">
            <div class="create-status-header">
                <h3>Drafts</h3>
                <button class="create-status-btn" id="closeDraftsModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="create-status-content">
                <div class="drafts-section active" id="allDraftsSection">
                    <div class="drafts-list" id="allDraftsList">
                        <div class="drafts-empty">
                            <i class="fas fa-file-alt"></i>
                            <p>No drafts yet</p>
                            <p class="subtext">Save a status as draft to see it here</p>
                        </div>
                    </div>
                </div>
            </div>
            <div style="padding: 20px; border-top: 1px solid var(--border-color); display: flex; justify-content: space-between;">
                <button class="action-btn secondary" id="deleteAllDraftsBtn">
                    <i class="fas fa-trash"></i> Delete All
                </button>
                <button class="action-btn primary" id="loadDraftBtn" disabled>
                    <i class="fas fa-edit"></i> Edit Draft
                </button>
            </div>
        </div>
    </div>
    
    <!-- Highlights Modal -->
    <div class="highlights-modal" id="highlightsModal">
        <div class="highlights-container">
            <div class="highlights-header">
                <h3>Status Highlights</h3>
                <div>
                    <button class="create-status-btn" id="createHighlightBtn" title="Create New Highlight">
                        <i class="fas fa-plus"></i>
                    </button>
                    <button class="create-status-btn" id="closeHighlightsModal">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
            <div class="highlights-content" id="highlightsContent">
                <!-- Highlights will be loaded here -->
            </div>
        </div>
    </div>
    
    <!-- Highlights Editor Modal -->
    <div class="highlights-editor" id="highlightsEditorModal">
        <div class="editor-container">
            <div class="editor-header">
                <h3 id="highlightEditorTitle">Create Highlight</h3>
                <button class="close-btn" id="closeHighlightsEditor">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="editor-content">
                <div class="text-input-container mb-20">
                    <label for="highlightNameInput" class="metadata-title">
                        <i class="fas fa-heading"></i>
                        <span>Highlight Name</span>
                    </label>
                    <input type="text" class="text-input" id="highlightNameInput" placeholder="Enter highlight name">
                </div>
                
                <div class="text-input-container mb-20">
                    <label for="highlightIconSelect" class="metadata-title">
                        <i class="fas fa-icons"></i>
                        <span>Icon</span>
                    </label>
                    <select class="text-input" id="highlightIconSelect">
                        <option value="fas fa-star">Star</option>
                        <option value="fas fa-heart">Heart</option>
                        <option value="fas fa-trophy">Trophy</option>
                        <option value="fas fa-gem">Gem</option>
                        <option value="fas fa-bookmark">Bookmark</option>
                        <option value="fas fa-flag">Flag</option>
                        <option value="fas fa-camera">Camera</option>
                        <option value="fas fa-music">Music</option>
                        <option value="fas fa-plane">Travel</option>
                        <option value="fas fa-utensils">Food</option>
                    </select>
                </div>
                
                <div class="text-input-container mb-20">
                    <label for="highlightColorSelect" class="metadata-title">
                        <i class="fas fa-palette"></i>
                        <span>Color</span>
                    </label>
                    <div class="background-grid" id="highlightColorGrid">
                        <!-- Color options will be loaded here -->
                    </div>
                </div>
                
                <div class="text-input-container mb-20">
                    <label class="metadata-title">
                        <i class="fas fa-lock"></i>
                        <span>Privacy</span>
                    </label>
                    <div class="privacy-options" id="highlightPrivacyOptions">
                        <!-- Privacy options will be loaded here -->
                    </div>
                </div>
            </div>
            <div class="editor-actions">
                <button class="action-btn secondary" id="cancelHighlightBtn">
                    Cancel
                </button>
                <button class="action-btn primary" id="saveHighlightBtn">
                    Save Highlight
                </button>
            </div>
        </div>
    </div>
    
    <!-- Memory Timeline Modal -->
    <div class="memory-timeline-modal" id="memoryTimelineModal">
        <div class="memory-timeline-container">
            <div class="memory-timeline-header">
                <h3>Memory Timeline</h3>
                <button class="create-status-btn" id="closeMemoryTimelineModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="timeline-filters-container">
                <button class="timeline-filter-btn active" data-filter="all">All</button>
                <button class="timeline-filter-btn" data-filter="motivational">Motivational</button>
                <button class="timeline-filter-btn" data-filter="reflective">Reflective</button>
                <button class="timeline-filter-btn" data-filter="achievements">Achievements</button>
                <button class="timeline-filter-btn" data-filter="happy">Happy Moments</button>
                <button class="timeline-filter-btn" data-filter="motivated">Motivated Days</button>
                <button class="action-btn secondary ml-auto" id="exportTimelineBtn">
                    <i class="fas fa-download"></i> Export
                </button>
            </div>
            <div class="memory-timeline-content" id="memoryTimelineContent">
                <!-- Timeline will be loaded here -->
            </div>
        </div>
    </div>
    
    <!-- Stats Modal -->
    <div class="stats-modal" id="statsModal">
        <div class="stats-container">
            <div class="stats-header">
                <h3>Status Analytics</h3>
                <div>
                    <button class="create-status-btn" id="refreshStatsBtn" title="Refresh Stats">
                        <i class="fas fa-redo"></i>
                    </button>
                    <button class="create-status-btn" id="closeStatsModal">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
            <div class="stats-content" id="statsContent">
                <div class="quick-stats">
                    <div class="quick-stat">
                        <div class="quick-stat-value" id="totalStatusesStat">0</div>
                        <div class="quick-stat-label">Total Statuses</div>
                    </div>
                    <div class="quick-stat">
                        <div class="quick-stat-value" id="totalViewsStat">0</div>
                        <div class="quick-stat-label">Total Views</div>
                    </div>
                    <div class="quick-stat">
                        <div class="quick-stat-value" id="totalReactionsStat">0</div>
                        <div class="quick-stat-label">Total Reactions</div>
                    </div>
                    <div class="quick-stat">
                        <div class="quick-stat-value" id="streakStat">0</div>
                        <div class="quick-stat-label">Day Streak</div>
                    </div>
                </div>
                
                <div class="stats-chart-container">
                    <div class="stats-chart-header">
                        <div class="stats-chart-title">Views Over Time</div>
                        <div class="stats-chart-period" id="chartPeriod">Last 30 days</div>
                    </div>
                    <div class="stats-chart-canvas" id="viewsChart">
                        <!-- Chart will be loaded here -->
                    </div>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="avgViewTimeStat">0s</div>
                        <div class="stat-label">Avg. View Time</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="engagementRateStat">0%</div>
                        <div class="stat-label">Engagement Rate</div>
                    </div>
                </div>
                
                <div class="recent-viewers">
                    <div class="recent-viewers-title">Top Viewers</div>
                    <div id="recentViewersList">
                        <!-- Viewers will be loaded here -->
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Schedule Modal -->
    <div class="create-status-modal" id="scheduleModal">
        <div class="create-status-container">
            <div class="create-status-header">
                <h3>Schedule Status</h3>
                <button class="create-status-btn" id="closeScheduleModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="create-status-content">
                <div class="metadata-section">
                    <div class="metadata-title">
                        <i class="fas fa-calendar-alt"></i>
                        <span>Select Date & Time</span>
                    </div>
                    <div class="schedule-datetime-picker">
                        <div class="schedule-date">
                            <input type="date" id="scheduleDate" class="text-input">
                        </div>
                        <div class="schedule-time">
                            <input type="time" id="scheduleTime" class="text-input">
                        </div>
                    </div>
                </div>
                
                <div class="metadata-section">
                    <div class="metadata-title">
                        <i class="fas fa-redo"></i>
                        <span>Repeat</span>
                    </div>
                    <div class="repeat-options" id="repeatOptions">
                        <div class="repeat-option" data-repeat="none">
                            Don't repeat
                        </div>
                        <div class="repeat-option" data-repeat="daily">
                            Daily
                        </div>
                        <div class="repeat-option" data-repeat="weekly">
                            Weekly
                        </div>
                        <div class="repeat-option" data-repeat="monthly">
                            Monthly
                        </div>
                    </div>
                </div>
                
                <div class="notification-settings">
                    <div class="notification-option">
                        <div class="notification-label">
                            <h4>Notification</h4>
                            <p>Notify me before posting</p>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="scheduleNotificationToggle">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    
                    <div class="notification-option">
                        <div class="notification-label">
                            <h4>Notification Time</h4>
                            <p>When to send notification</p>
                        </div>
                        <select class="text-input w-auto" id="notificationTimeSelect" disabled>
                            <option value="5">5 minutes before</option>
                            <option value="15">15 minutes before</option>
                            <option value="30">30 minutes before</option>
                            <option value="60">1 hour before</option>
                        </select>
                    </div>
                </div>
                
                <div class="metadata-section">
                    <div class="metadata-title">
                        <i class="fas fa-list"></i>
                        <span>Scheduled Statuses</span>
                    </div>
                    <div class="schedule-list" id="scheduledStatusesList">
                        <!-- Scheduled statuses will be loaded here -->
                    </div>
                </div>
            </div>
            <div style="padding: 20px; border-top: 1px solid var(--border-color); display: flex; justify-content: space-between;">
                <button class="action-btn secondary" id="cancelScheduleBtn">
                    <i class="fas fa-times"></i> Cancel
                </button>
                <button class="action-btn success" id="confirmScheduleBtn">
                    <i class="fas fa-clock"></i> Schedule Status
                </button>
            </div>
        </div>
    </div>
    
    <!-- Report Modal -->
    <div class="create-status-modal" id="reportModal">
        <div class="create-status-container">
            <div class="create-status-header">
                <h3>Report Status</h3>
                <button class="create-status-btn" id="closeReportModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="create-status-content">
                <div class="metadata-section">
                    <div class="metadata-title">
                        <i class="fas fa-exclamation-triangle"></i>
                        <span>Reason for Reporting</span>
                    </div>
                    <div class="category-options" id="reportReasons">
                        <!-- Report reasons will be loaded here -->
                    </div>
                </div>
                
                <div class="report-details">
                    <div class="metadata-title">
                        <i class="fas fa-comment"></i>
                        <span>Additional Details (Required)</span>
                    </div>
                    <textarea class="text-input" id="reportDetails" placeholder="Please explain why you are reporting this status..." rows="4"></textarea>
                    <div class="text-right mt-10">
                        <span id="reportDetailsCounter">0/500</span>
                    </div>
                </div>
                
                <div class="metadata-section mt-20">
                    <div class="metadata-title">
                        <i class="fas fa-shield-alt"></i>
                        <span>Report Anonymously</span>
                    </div>
                    <label class="toggle-switch" style="display: flex; align-items: center; gap: 15px;">
                        <span style="flex: 1;">Submit report anonymously</span>
                        <input type="checkbox" id="anonymousReportToggle">
                        <span class="toggle-slider"></span>
                    </label>
                    <p style="font-size: 12px; color: var(--text-secondary); margin-top: 5px;">
                        Your identity will not be shared with the reported user
                    </p>
                </div>
            </div>
            <div style="padding: 20px; border-top: 1px solid var(--border-color); display: flex; justify-content: space-between;">
                <button class="action-btn secondary" id="cancelReportBtn">
                    <i class="fas fa-times"></i> Cancel
                </button>
                <button class="action-btn danger" id="submitReportBtn" disabled>
                    <i class="fas fa-flag"></i> Submit Report
                </button>
            </div>
        </div>
    </div>
    
    <div class="app-container">
        <!-- Sidebar with status list -->
        <div class="sidebar active" id="sidebar">
            <div class="sidebar-header">
                <h2>Status</h2>
                <div style="display: flex; gap: 10px;">
                    <button class="create-status-btn" id="viewHighlightsBtn" title="View Highlights">
                        <i class="fas fa-star"></i>
                    </button>
                    <button class="create-status-btn" id="viewDraftsBtn" title="View Drafts">
                        <i class="fas fa-file-alt"></i>
                    </button>
                    <button class="create-status-btn" id="createStatusBtn" title="Create new status">
                        <i class="fas fa-plus"></i>
                    </button>
                </div>
            </div>
            
            <div class="status-categories">
                <button class="category-btn active" id="allTab">All Status</button>
                <button class="category-btn" id="friendsTab">Friends</button>
                <button class="category-btn" id="closeFriendsTab">Close Friends</button>
                <button class="category-btn" id="pinnedTab">Pinned</button>
                <button class="category-btn" id="mutedTab">Muted</button>
                <button class="category-btn" id="microCirclesTab">Micro Circles</button>
                <button class="category-btn" id="myStatusTab" style="display: none;">My Status</button>
            </div>
            
            <!-- Filter Tags -->
            <div class="filter-tags" id="filterTags">
                <button class="clear-filters-btn" id="clearFiltersBtn" style="display: none;">
                    <i class="fas fa-times"></i> Clear Filters
                </button>
            </div>
            
            <!-- My Status Preview -->
            <div class="my-status-preview" id="myStatusPreview">
                <div class="my-status-avatar">
                    <div class="my-status-avatar-ring" id="myStatusRing">
                        <div class="my-status-avatar-inner" id="myStatusAvatar">
                            <i class="fas fa-user"></i>
                        </div>
                    </div>
                </div>
                <div class="my-status-info">
                    <div class="my-status-name">My Status</div>
                    <div class="my-status-text">
                        <div class="my-status-indicator" id="myStatusIndicator"></div>
                        <span id="myStatusText">No recent status</span>
                    </div>
                </div>
                <button class="status-action-btn" id="viewMyStatusBtn" title="View my status">
                    <i class="fas fa-eye"></i>
                </button>
                <button class="status-action-btn" id="editMyStatusBtn" title="Edit my status">
                    <i class="fas fa-edit"></i>
                </button>
            </div>
            
            <!-- Streak Counter -->
            <div class="streak-counter">
                <div class="streak-info">
                    <div class="streak-icon">
                        <i class="fas fa-fire"></i>
                    </div>
                    <div class="streak-details">
                        <h4>Posting Streak</h4>
                        <p>Daily status updates</p>
                    </div>
                </div>
                <div class="streak-count" id="streakCount">0</div>
            </div>
            
            <!-- Mood Trends -->
            <div class="mood-trends">
                <h4>Mood Trends (Last 30 days)</h4>
                <div class="mood-chart" id="moodChart">
                    <!-- Mood chart bars will be loaded here -->
                </div>
            </div>
            
            <!-- Quick Actions -->
            <div class="quick-actions">
                <button class="quick-action-btn" id="viewTimelineBtn" title="Memory Timeline">
                    <div class="quick-action-icon">
                        <i class="fas fa-history"></i>
                    </div>
                    <div class="quick-action-text">Timeline</div>
                </button>
                <button class="quick-action-btn" id="viewStatsBtn" title="View Stats">
                    <div class="quick-action-icon">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <div class="quick-action-text">Analytics</div>
                </button>
                <button class="quick-action-btn" id="viewScheduledBtn" title="View Scheduled">
                    <div class="quick-action-icon">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="quick-action-text">Scheduled</div>
                </button>
            </div>
            
            <!-- Intent & Mood Filters -->
            <div class="status-categories" style="border-top: 1px solid var(--border-color);">
                <button class="category-btn" data-filter="intent-feedback">Feedback</button>
                <button class="category-btn" data-filter="intent-achievement">Achievement</button>
                <button class="category-btn" data-filter="intent-advice">Advice</button>
                <button class="category-btn" data-filter="mood-happy">Happy</button>
                <button class="category-btn" data-filter="mood-motivated">Motivated</button>
            </div>
            
            <div class="status-list">
                <div class="status-list-content">
                    <!-- All Status Section -->
                    <div class="statuses-section active" id="allStatusSection">
                        <div class="statuses-list" id="allStatusList">
                            <div class="enhanced-loading">
                                <i class="fas fa-spinner"></i>
                                <p>Loading statuses...</p>
                                <div class="loading-progress">
                                    <div class="loading-progress-bar"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Friends Status Section -->
                    <div class="statuses-section" id="friendsStatusSection">
                        <div class="statuses-list" id="friendsStatusList">
                            <!-- Friends statuses will be loaded here -->
                        </div>
                    </div>
                    
                    <!-- Close Friends Status Section -->
                    <div class="statuses-section" id="closeFriendsStatusSection">
                        <div class="statuses-list" id="closeFriendsStatusList">
                            <!-- Close friends statuses will be loaded here -->
                        </div>
                    </div>
                    
                    <!-- Pinned Status Section -->
                    <div class="statuses-section" id="pinnedStatusSection">
                        <div class="statuses-list" id="pinnedStatusList">
                            <!-- Pinned statuses will be loaded here -->
                        </div>
                    </div>
                    
                    <!-- Muted Status Section -->
                    <div class="statuses-section" id="mutedStatusSection">
                        <div class="statuses-list" id="mutedStatusList">
                            <!-- Muted statuses will be loaded here -->
                        </div>
                    </div>
                    
                    <!-- Micro Circles Status Section -->
                    <div class="statuses-section" id="microCirclesStatusSection">
                        <div class="statuses-list" id="microCirclesStatusList">
                            <!-- Micro circles statuses will be loaded here -->
                        </div>
                    </div>
                    
                    <!-- My Status Section -->
                    <div class="statuses-section" id="myStatusSection">
                        <div class="statuses-list" id="myStatusList">
                            <!-- My statuses will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Status Viewer Panel -->
        <div class="status-viewer-panel" id="statusViewerPanel">
            <div class="viewer-header">
                <button class="viewer-back-btn" id="viewerBackBtn">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div class="viewer-user-info" id="viewerUserInfo">
                    <!-- User info will be loaded here -->
                </div>
                <div class="viewer-controls">
                    <button class="viewer-control-btn" id="pauseResumeBtn" title="Pause/Resume">
                        <i class="fas fa-pause"></i>
                    </button>
                    <button class="viewer-control-btn" id="muteUserBtn" title="Mute User">
                        <i class="fas fa-volume-mute"></i>
                    </button>
                    <button class="viewer-control-btn" id="shareStatusBtn" title="Share">
                        <i class="fas fa-share"></i>
                    </button>
                    <button class="viewer-control-btn" id="saveStatusBtn" title="Save to Highlights">
                        <i class="fas fa-bookmark"></i>
                    </button>
                    <button class="viewer-control-btn" id="reportStatusBtn" title="Report">
                        <i class="fas fa-flag"></i>
                    </button>
                </div>
            </div>
            
            <!-- Progress Indicators -->
            <div class="progress-indicators" id="progressIndicators">
                <!-- Progress bars will be loaded here -->
            </div>
            
            <div class="viewer-content" id="viewerContent">
                <!-- Status slides will be loaded here -->
            </div>
            
            <!-- Action Buttons Overlay -->
            <div class="action-buttons-overlay" id="actionButtonsOverlay">
                <!-- Action buttons will be loaded here -->
            </div>
            
            <div class="viewer-footer">
                <!-- Reactions -->
                <div class="reactions-container" id="reactionsContainer">
                    <!-- Reaction buttons will be loaded here -->
                </div>
                
                <!-- Reply Input -->
                <div class="reply-input-container">
                    <input type="text" class="reply-input" id="replyInput" placeholder="Type a reply...">
                    <button class="send-reply-btn" id="sendReplyBtn">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Notification -->
    <div class="notification" id="notification">
        <i class="fas fa-check-circle"></i>
        <span id="notificationText">Operation completed successfully</span>
        <button class="close-btn" id="closeNotificationBtn" style="margin-left: auto;">
            <i class="fas fa-times"></i>
        </button>
    </div>
    
    <!-- Error UI -->
    <div class="error-ui" id="errorUI">
        <div class="error-container">
            <div class="error-icon">
                <i class="fas fa-exclamation-circle"></i>
            </div>
            <div class="error-title" id="errorTitle">Connection Error</div>
            <div class="error-message" id="errorMessage">Unable to connect to the server. Please check your internet connection.</div>
            <div style="display: flex; gap: 10px; margin-top: 20px;">
                <button class="action-btn secondary" id="retryConnectionBtn">
                    <i class="fas fa-redo"></i> Retry
                </button>
                <button class="action-btn primary" id="offlineModeBtn">
                    <i class="fas fa-wifi-slash"></i> Use Offline
                </button>
            </div>
        </div>
    </div>

    <script src="status.js"></script>
</body>
</html>